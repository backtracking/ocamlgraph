<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Make_graph (ocamlgraph.Graph.Dominator.Make_graph)</title><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">ocamlgraph</a> &#x00BB; <a href="../../index.html">Graph</a> &#x00BB; <a href="../index.html">Dominator</a> &#x00BB; Make_graph</nav><header class="odoc-preamble"><h1>Module <code><span>Dominator.Make_graph</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#parameters">Parameters</a></li><li><a href="#signature">Signature</a></li></ul></nav><div class="odoc-content"><h2 id="parameters"><a href="#parameters" class="anchor"></a>Parameters</h2><div class="odoc-spec"><div class="spec parameter anchored" id="argument-1-G"><a href="#argument-1-G" class="anchor"></a><code><span><span class="keyword">module</span> </span><span><a href="argument-1-G/index.html">G</a></span><span> : <a href="../module-type-I/index.html">I</a></span></code></div></div><h2 id="signature"><a href="#signature" class="anchor"></a>Signature</h2><div class="odoc-include"><details open="open"><summary class="spec include"><code><span><span class="keyword">include</span> <a href="../module-type-S/index.html">S</a> <span class="keyword">with</span> <span><span class="keyword">type</span> <a href="../module-type-S/index.html#type-t">t</a> = <a href="argument-1-G/index.html#type-t">G.t</a></span> <span class="keyword">and</span> <span><span class="keyword">type</span> <a href="../module-type-S/index.html#type-vertex">vertex</a> = <a href="argument-1-G/V/index.html#type-t">G.V.t</a></span></span></code></summary><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span><span> = <a href="argument-1-G/index.html#type-t">G.t</a></span></code></div><div class="spec-doc"><p>type of graphs</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-vertex"><a href="#type-vertex" class="anchor"></a><code><span><span class="keyword">type</span> vertex</span><span> = <a href="argument-1-G/V/index.html#type-t">G.V.t</a></span></code></div><div class="spec-doc"><p>type of vertices</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-S"><a href="#module-S" class="anchor"></a><code><span><span class="keyword">module</span> S</span><span> : <span class="xref-unresolved">Stdlib</span>.Set.S <span class="keyword">with</span> <span><span class="keyword">type</span> <span class="xref-unresolved">elt</span> = <span class="xref-unresolved">vertex</span></span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-idom"><a href="#type-idom" class="anchor"></a><code><span><span class="keyword">type</span> idom</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-vertex">vertex</a></span></code></div><div class="spec-doc"><p>function from <code>n</code> to <code>n</code>'s immediate dominator</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-idoms"><a href="#type-idoms" class="anchor"></a><code><span><span class="keyword">type</span> idoms</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>idoms x y</code> is true when <code>x</code> is <code>y</code>'s immediate dominator</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-dom_tree"><a href="#type-dom_tree" class="anchor"></a><code><span><span class="keyword">type</span> dom_tree</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span></span></code></div><div class="spec-doc"><p>function from <code>x</code> to a list of nodes immediately dominated by <code>x</code></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-dominators"><a href="#type-dominators" class="anchor"></a><code><span><span class="keyword">type</span> dominators</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span></span></code></div><div class="spec-doc"><p>function from node to a list of nodes that dominate it.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-dom"><a href="#type-dom" class="anchor"></a><code><span><span class="keyword">type</span> dom</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>dom x y</code> returns true iff <code>x</code> dominates <code>y</code></p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-sdom"><a href="#type-sdom" class="anchor"></a><code><span><span class="keyword">type</span> sdom</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>sdom x y</code> returns true iff <code>x</code> strictly dominates <code>y</code>.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-dom_frontier"><a href="#type-dom_frontier" class="anchor"></a><code><span><span class="keyword">type</span> dom_frontier</span><span> = <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span></span></code></div><div class="spec-doc"><p>function from <code>x</code> to a list of nodes not dominated by <code>x</code>, but with predecessors which are dominated by <code>x</code></p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_idom"><a href="#val-compute_idom" class="anchor"></a><code><span><span class="keyword">val</span> compute_idom : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-vertex">vertex</a></span></code></div><div class="spec-doc"><p>Computes the dominator tree, using the Lengauer-Tarjan algorithm. <code>compute_idom cfg s0</code> returns a function <code>idom : V.t -&gt; V.t</code> s.t. <code>idom x</code> returns the immediate dominator of <code>x</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dominators_to_dom"><a href="#val-dominators_to_dom" class="anchor"></a><code><span><span class="keyword">val</span> dominators_to_dom : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Given a function from a node to it's dominators, returns a function <code>dom : V.t -&gt; V.t -&gt; bool</code> s.t. <code>dom x y</code> returns true when <code>x</code> dominates <code>y</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dominators_to_sdom"><a href="#val-dominators_to_sdom" class="anchor"></a><code><span><span class="keyword">val</span> dominators_to_sdom : <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Given a function from a node to it's dominators, returns a function <code>sdom : V.t -&gt; V.t -&gt; bool</code> s.t. <code>sdom x y</code> returns true when <code>x</code> strictly dominates <code>y</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dom_to_sdom"><a href="#val-dom_to_sdom" class="anchor"></a><code><span><span class="keyword">val</span> dom_to_sdom : <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dominators_to_sdominators"><a href="#val-dominators_to_sdominators" class="anchor"></a><code><span><span class="keyword">val</span> dominators_to_sdominators : <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t</span></code></div><div class="spec-doc"><p>Given a a function from a node to it's dominators, returns a function from a node to it's strict dominators.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dominators_to_idoms"><a href="#val-dominators_to_idoms" class="anchor"></a><code><span><span class="keyword">val</span> dominators_to_idoms : <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p>Given a function from a node to it's dominators, returns a function <code>idoms : vertex -&gt; vertex -&gt; bool</code> s.t. <code>idoms x y</code> returns true when <code>x</code> is the immediate dominator of <code>y</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dominators_to_dom_tree"><a href="#val-dominators_to_dom_tree" class="anchor"></a><code><span><span class="keyword">val</span> dominators_to_dom_tree : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>?pred:<span>(<span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span>)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span>
  <span class="xref-unresolved">S</span>.t</span></code></div><div class="spec-doc"><p>Computes a dominator tree (function from x to a list of nodes immediately dominated by x) for the given CFG and dominator function. Note: The dominator tree is also called <code>IDom</code> by Muchnick. Note: If you are computing a post-dominator tree, then the optional argument pred should be G.succ.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-idom_to_dom_tree"><a href="#val-idom_to_dom_tree" class="anchor"></a><code><span><span class="keyword">val</span> idom_to_dom_tree : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-vertex">vertex</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span></span></code></div><div class="spec-doc"><p>Computes a dominator tree (function from x to a list of nodes immediately dominated by x) for the given CFG and idom function.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-idom_to_idoms"><a href="#val-idom_to_idoms" class="anchor"></a><code><span><span class="keyword">val</span> idom_to_idoms : <span><a href="#type-idom">idom</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_dom_frontier"><a href="#val-compute_dom_frontier" class="anchor"></a><code><span><span class="keyword">val</span> compute_dom_frontier : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-dom_tree">dom_tree</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-idom">idom</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span></span></code></div><div class="spec-doc"><p>Computes the dominance frontier. As specified in section 19.1 of Modern Compiler Implementation in ML by Andrew Appel.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-idom_to_dominators"><a href="#val-idom_to_dominators" class="anchor"></a><code><span><span class="keyword">val</span> idom_to_dominators : <span><span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span class="type-var">'a</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-idom_to_dom"><a href="#val-idom_to_dom" class="anchor"></a><code><span><span class="keyword">val</span> idom_to_dom : <span><span>(<span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-vertex">vertex</a>)</span> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dom_tree_to_nontrivial_dom"><a href="#val-dom_tree_to_nontrivial_dom" class="anchor"></a><code><span><span class="keyword">val</span> dom_tree_to_nontrivial_dom : <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-dom_tree">dom_tree</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> list</span></span></code></div><div class="spec-doc"><p>Returns a list of the non-trivial dominators of a flowgraph G(v) given the start vertex <code>v</code> and the corresponding dominator tree. E.g., <code>dom_tree_to_nontrivial_dom v (idom_to_dom_tree g (compute_idom g v))</code>. A vertex u is a non-trivial dominator of G(v) if it dominates some vertex w other than v and u.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-dom_tree_to_snontrivial_dom"><a href="#val-dom_tree_to_snontrivial_dom" class="anchor"></a><code><span><span class="keyword">val</span> dom_tree_to_snontrivial_dom : <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-dom_tree">dom_tree</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">S</span>.t</span></code></div><div class="spec-doc"><p>As for <code>dom_tree_to_nontrivial_dom</code> but returns a set.</p></div></div></details></div><div class="odoc-spec"><div class="spec type anchored" id="type-dom_graph"><a href="#type-dom_graph" class="anchor"></a><code><span><span class="keyword">type</span> dom_graph</span><span> = <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-dom_functions"><a href="#type-dom_functions" class="anchor"></a><code><span><span class="keyword">type</span> dom_functions</span><span> = </span><span>{</span></code><ol><li id="type-dom_functions.idom" class="def record field anchored"><a href="#type-dom_functions.idom" class="anchor"></a><code><span>idom : <a href="#type-idom">idom</a>;</span></code></li><li id="type-dom_functions.idoms" class="def record field anchored"><a href="#type-dom_functions.idoms" class="anchor"></a><code><span>idoms : <a href="#type-idoms">idoms</a>;</span></code></li><li id="type-dom_functions.dom_tree" class="def record field anchored"><a href="#type-dom_functions.dom_tree" class="anchor"></a><code><span>dom_tree : <a href="#type-dom_tree">dom_tree</a>;</span></code></li><li id="type-dom_functions.dominators" class="def record field anchored"><a href="#type-dom_functions.dominators" class="anchor"></a><code><span>dominators : <a href="#type-dominators">dominators</a>;</span></code></li><li id="type-dom_functions.dom" class="def record field anchored"><a href="#type-dom_functions.dom" class="anchor"></a><code><span>dom : <a href="#type-dom">dom</a>;</span></code></li><li id="type-dom_functions.sdom" class="def record field anchored"><a href="#type-dom_functions.sdom" class="anchor"></a><code><span>sdom : <a href="#type-sdom">sdom</a>;</span></code></li><li id="type-dom_functions.dom_frontier" class="def record field anchored"><a href="#type-dom_functions.dom_frontier" class="anchor"></a><code><span>dom_frontier : <a href="#type-dom_frontier">dom_frontier</a>;</span></code></li><li id="type-dom_functions.dom_graph" class="def record field anchored"><a href="#type-dom_functions.dom_graph" class="anchor"></a><code><span>dom_graph : <a href="#type-dom_graph">dom_graph</a>;</span></code></li></ol><code><span>}</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_dom_graph"><a href="#val-compute_dom_graph" class="anchor"></a><code><span><span class="keyword">val</span> compute_dom_graph : <span><a href="argument-1-G/index.html#type-t">G.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-dom_tree">dom_tree</a> <span class="arrow">&#45;&gt;</span></span> <a href="argument-1-G/index.html#type-t">G.t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-compute_all"><a href="#val-compute_all" class="anchor"></a><code><span><span class="keyword">val</span> compute_all : <span><a href="argument-1-G/index.html#type-t">G.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-vertex">vertex</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-dom_functions">dom_functions</a></span></code></div><div class="spec-doc"><p>Computes all dominance functions.</p><p>This function computes some things eagerly and some lazily, so don't worry about it doing extra work to compute functions you don't need, but also don't call it if you aren't going to use anything it returns.</p><ul class="at-tags"><li class="returns"><span class="at-tag">returns</span> <p>a record containing all dominance functions for the given graph and entry node.</p></li></ul></div></div></div></body></html>